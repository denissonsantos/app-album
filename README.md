ZF2 and AngularJS project template
==================================

All-in-one development vagrant box and project scaffold for ZF2 Apigility API server and AngularJS client-side applications (or

You do NOT have to install anything locally on your dev machine - vagrant box should provide all tools necessary!


Server
------

__[ZF2](http://framework.zend.com/)__

__[Apigility](http://www.apigility.org/)__

__[PHPUnit](http://phpunit.de/)__


Client
------

__[AngularJS](https://angularjs.org/)__

Whether you need complex one-page app or enrich your server-rendered pages with simple JS widgets - AngularJS made it easy for you!

__[RequireJS](http://requirejs.org/)__

Async JS file/module loader.

__[Karma/Jasmine]__


__[SASS](http://sass-lang.com/)__


__[Bootstrap 3 SASS](http://getbootstrap.com/css/#sass)__

__[FontCustom](http://fontcustom.com/)__


Vagrant box
-----------

__Ubuntu 12.04 Precise 64bit__

Box is based on https://puphpet.com/ with some extra provisioning (`puphpet/files/exec-once`).

Default configuration can be modified in /puphpet/config.yaml. This file can be uploaded to https://puphpet.com/ to be modified using an UI.

* Apache
* PHP 5.5 - xdebug
* MySQL
* mailcatcher


Modified files/folders generated by puphpet.com:

* `puphpet/files/exec-once` - some extra provisioning
* `puphpet/files/dot/.bash_aliases` - look for '#kapitchi'


Installation
============

1. Clone project

```
git clone https://github.com/kapitchi/project-template-zf2-angularjs.git
```

2. Provision vagrant box

```
vagrant up
```

3. Add `myapp.local` to hosts file

```
192.168.60.101 myapp.local
```

4. Create local default settings (optional)

Copy `config/autoload/local.php.dist` to `config/autoload/local.php`
This creates Apigility MySql DB adapter for pre-installed MySQL `myapp` database

5. Build project

Build your project as discussed in _Development_ section below.

You should be able to see working demo page on:
http://myapp.local


Bookmarks
=========

__Your project__

http://myapp.local


__Apigility__

http://192.168.60.101:8080/apigility/ui

_Note: Available only in development mode. See Development section below._


__PHP code coverage__

http://192.168.60.101/report/test/php/coverage/

_Note: You need to run `phpunit` first_


__JS code coverage__

http://192.168.60.101/report/test/js/coverage/

_Note: You need to run `karma` first_

__MySQL__

http://192.168.60.101/phpmyadmin  
User: root  
Pass: 123


__Mailcatcher__

http://192.168.60.101:1080/

In order to use mailcatcher your application mailer needs to be set up using this SMTP settings:  
Host: 127.0.0.1  
Port: 1025



Development
===========

Vagrant ssh into a box (`cd /vagrant` folder) and run:
```
npm install
composer install
bower install
compass compile
```

Open: http://myapp.local


Grunt tasks
-----------

`grunt bower` - adds bower components into RequireJS config file `public\config.js`


Apigility Admin
---------------

Apigility Admin is devel tool and needs write permission on certain folders/files (e.g. `config/autoload/global.php`, `config/autoload/local.php`, `module` folder, etc).
Instead of messing up with write permissions on project folders it's better to run it using PHP build-in server using vagrant user.

On vagrant box run a script below.
This enables development mode, then runs Apigility using PHP build-in server and once stopped (using CTRL+C) switches development mode off again.
```
./bin/apigility
```

UI should now be accessible on:  
http://192.168.60.101:8080/apigility/ui


Unit testing
------------

__PHP__

Tests are under `test/php` folder.

```
phpunit
```

Code coverage
http://192.168.60.101/report/test/php/coverage/

__Javascript__

Tests are under `test/js` folder.

```
karma start
```

Code coverage
http://192.168.60.101/report/test/js/coverage/


PHP Debugging
-------------

Find an extension for your browser here:
http://xdebug.org/docs/remote

Start listening to debug connections in your IDE, switch debug on using browser extension and refresh the page (tested with PhpStorm 7.1.3).
Note: You need to set path mapping in your IDE: your local project root folder = `/vagrant` path on vagrant box


To consider
===========

* https://www.npmjs.org/package/grunt-vagrant-ssh
* https://github.com/btford/ngmin
* http://mobileangularui.com/

TODO
====

* docs
* apigility server (grunt) command

Contributing
============

Contact me on mz@kapitchi.com with any comments/feedback/ideas.

Things to keep an eye on in order to maintain this project template up-to-date:

* Apigility skeleton app - https://github.com/zfcampus/zf-apigility-skeleton